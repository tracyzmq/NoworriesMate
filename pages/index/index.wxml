<view class="container">
  
  <image class="timg" src="/images/top.png" mode=""/>

 <view class="list-card" id="source-content">

   <view class="list-content">
     <block wx:for="{{checklist}}" wx:key="index">
       <view class="list-item" bindtap="toggleCheck" data-index="{{index}}">
         <view class="checkbox-box">
           <view wx:if="{{item.checked}}" class="check-mark">✔</view>
         </view>
         <text class="list-text">{{item.text}}</text>
         <view wx:if="{{index === 1}}" class="green-star">✦</view>
       </view>
     </block>
   </view>
   
   <view class="bbtn" wx:if="{{btnShow}}">
     <button class="bbtn2" loading="{{loading}}" bindtap="generateImage">{{loading ? '生成中...' : '生成今日报告'}}</button>
     <image class="bimg" src="/images/bom.png" mode=""/>
   </view>
 </view>
  <!-- 每日语录 -->
  <view class="daily-quote-section">
    <view class="quote-header">
      <text class="quote-icon">❝</text>
      <text class="quote-title">今日减压语录</text>
    </view>
    <view class="quote-content">
      <text class="quote-text">{{dailyQuote.content}}</text>
      <text class="quote-author">—— {{dailyQuote.author}}</text>
    </view>
  </view>
</view>
  <!-- 导航按钮区域 -->
  <view class="nav-section">
    <view class="nav-buttons">
      <button class="nav-btn" bindtap="goToHistory">查看历史记录</button>
      <button class="nav-btn" bindtap="goToProfile">个人中心</button>
    </view>
  </view>
  <view style="height: 100rpx;"></view>
<!-- 图片预览弹框 -->
<view class="preview-modal" wx:if="{{showPreview}}">
 <view class="preview-mask" bindtap="closePreview"></view>
 <view class="preview-content">
   <!-- 预览图片 -->
   <image style="width: 100%" class="preview-img" src="{{previewImagePath}}" mode="widthFix" bindtap="previewImageFull"></image>
   <!-- 保存按钮 -->
   <button class="save-btn" bindtap="saveImage">保存到相册</button>
   <!-- 关闭按钮 -->
   <view class="close-btn" bindtap="closePreview">✕</view>
 </view>
</view>

<canvas style="width:750px;height:1334px;position:fixed;top:-9999rpx; left:-9999rpx;" canvas-id="shareCanvas"></canvas>